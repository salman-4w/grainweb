Ext.form.MiscField=function(config){Ext.form.MiscField.superclass.constructor.call(this,config);};Ext.extend(Ext.form.MiscField,Ext.BoxComponent,{defaultAutoCreate:{tag:"div"},fieldClass:"x-form-field",isFormField:true,value:undefined,disableReset:false,initComponent:function(){Ext.form.MiscField.superclass.initComponent.call(this);},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:(this.hiddenName||'');},onRender:function(ct,position){Ext.form.MiscField.superclass.onRender.call(this,ct,position);if(!this.el){var cfg=this.getAutoCreate();if(!cfg.name){cfg.name=this.name||this.id;}
this.el=ct.createChild(cfg,position);}
this.el.addClass([this.fieldClass,this.cls]);this.initValue();},initValue:function(){if(this.value!==undefined){this.setRawValue(this.value);}else if(this.el.dom.innerHTML.length>0){this.setRawValue(this.el.dom.innerHTML);}},isDirty:function(){return String(this.getRawValue())!==String(this.originalValue);},afterRender:function(){Ext.form.MiscField.superclass.afterRender.call(this);this.initEvents();},reset:function(force){if(!this.disableReset||force===true){this.setRawValue(this.originalValue);}},initEvents:function(){this.originalValue=this.getRawValue();},isValid:function(){return true;},validate:function(){return true;},processValue:function(value){return value;},validateValue:function(value){return true;},markInvalid:function(){return;},clearInvalid:function(){return;},getRawValue:function(){return this.el.dom.innerHTML;},getValue:function(){var f=Ext.util.Format;var v=f.trim(f.stripTags(this.getRawValue()));return v;},setRawValue:function(v){this.value=v;if(this.rendered){this.el.dom.innerHTML=v;}},setValue:function(v){var f=Ext.util.Format;this.setRawValue(f.trim(f.stripTags(v)));}});Ext.ComponentMgr.registerType('miscfield',Ext.form.MiscField);Ext.app.SearchField=Ext.extend(Ext.form.TwinTriggerField,{initComponent:function(){Ext.app.SearchField.superclass.initComponent.call(this);this.on('specialkey',function(f,e){if(e.getKey()==e.ENTER){this.onTrigger2Click();}},this);},validationEvent:false,validateOnBlur:false,trigger1Class:'x-form-clear-trigger',trigger2Class:'x-form-search-trigger',hideTrigger1:true,width:180,hasSearch:false,paramName:'query',onTrigger1Click:function(){if(this.hasSearch){this.el.dom.value='';var o={start:0};this.store.baseParams=this.store.baseParams||{};this.store.baseParams[this.paramName]='';this.store.reload({params:o});this.triggers[0].hide();this.hasSearch=false;}},onTrigger2Click:function(){var v=this.getRawValue();if(v.length<1){this.onTrigger1Click();return;}
this.store.baseParams=this.store.baseParams||{};this.store.baseParams[this.paramName]=v;var lastOptions=this.store.lastOptions;Ext.apply(lastOptions.params,{start:0});this.store.reload(lastOptions);this.hasSearch=true;this.triggers[0].show();}});Ext.form.VTypes['passwordLength']=/^.{3,40}$/;Ext.form.VTypes['password']=function(value){if(!Ext.form.VTypes['passwordLength'].test(value)){Ext.form.VTypes['passwordText']='Password length must be 3 to 40 characters long';return false;}
return true;};Ext.form.VTypes['passwordConfirmation']=function(value,field){if(Ext.get(field.passwordField).getValue()!=value){Ext.form.VTypes['passwordConfirmationText']="Password confirmation doesn't match password";return false;}
return true;};Ext.form.VTypes['locationZip']=/^\d+$/;Ext.form.VTypes['locationCityAndState']=/^\w+\s?\w+,\s?\w\w$/;Ext.form.VTypes['location']=function(value){if(!Ext.form.VTypes['locationZip'].test(value)&&!Ext.form.VTypes['locationCityAndState'].test(value)){Ext.form.VTypes['locationText']='Location should be a ZIP code or string in "City, ST" format';return false;}
return true;};Ext.form.VTypes['float']=function(value){if(isNaN(parseFloat(value))){Ext.form.VTypes['floatText']='Incorrect value';return false;}
return true;};